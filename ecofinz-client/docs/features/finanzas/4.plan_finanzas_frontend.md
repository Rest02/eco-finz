### **Contexto**

[] Este documento detalla el plan de acción para el desarrollo frontend del módulo de Finanzas. Toda la planificación se basa en las especificaciones, endpoints y modelos de datos definidos en el documento de backend: `3.detail_finanzas_module.md`. Sirve como guía para asegurar que el frontend se alinee correctamente con la lógica del servidor y mantenga los estándares de seguridad requeridos para que cualquier IA o desarrollador que se integre al proyecto pueda entenderlo para trabajar.

### **Buenas Prácticas para la IA**

*   **Seguir los Principios SOLID:**
    *   **S (Single Responsibility):** Cada componente, servicio o función debe tener una única responsabilidad.
    *   **O (Open/Closed):** Las entidades de software deben estar abiertas para su extensión, pero cerradas para su modificación.
    *   **L (Liskov Substitution):** Los objetos de una superclase deben poder ser reemplazados por objetos de una subclase sin afectar la corrección del programa.
    *   **I (Interface Segregation):** Ningún cliente debe ser forzado a depender de interfaces que no utiliza.
    *   **D (Dependency Inversion):** Los módulos de alto nivel no deben depender de los de bajo nivel. Ambos deben depender de abstracciones.
*   **Evitar la Redundancia (DRY - Don't Repeat Yourself):** Reutilizar código y lógica a través de componentes, hooks y servicios personalizados siempre que sea posible.
*   **Código Limpio y Legible:** Escribir código claro, conciso y bien documentado (cuando sea necesario). Seguir las convenciones de estilo del proyecto (`ESLint`).
*   **Modularidad:** Construir componentes y servicios que sean modulares e intercambiables.

### **Metodología de Trabajo**

1.  **Desarrollo por Fases:** La IA completará las tareas de una fase a la vez.
2.  **Notificación al Usuario:** Al finalizar todas las tareas de una fase, la IA informará al usuario que la fase ha sido completada y está lista para revisión.
3.  **Revisión del Usuario:** El usuario revisará el trabajo realizado. Si hay correcciones o ajustes, se los comunicará a la IA.
4.  **Iteración:** La IA y el usuario iterarán sobre los ajustes hasta que el usuario dé su aprobación.
5.  **Interacción con la Consola:** El usuario es el único responsable de ejecutar comandos en la terminal. Si se necesita ejecutar un comando (ej. `npm install`, `npm run dev`), la IA proporcionará el comando exacto y el usuario lo ejecutará.

---

### **Plan de Implementación Frontend: Módulo de Finanzas (Estructura Modular)**

[] El objetivo es construir la interfaz de usuario y la lógica de negocio para el módulo de finanzas, centralizando todo el código fuente relevante (excepto las páginas) dentro de la carpeta `src/finance` para una máxima modularidad.

#### **[x] Fase 1: Capa de Datos y Servicios (Fundamentos)**

[x] Esta fase se centra en establecer la comunicación con la API y definir las estructuras de datos necesarias, todo dentro de `src/finance`.

*   **[x] Tarea 1.1: Configuración de Variables de Entorno.**
    *   [x] Añadir la URL base de la API del backend en un archivo `.env.local` en la raíz del proyecto.

*   **[x] Tarea 1.2: Creación del Servicio de Finanzas (`financeService`).**
    *   [x] Crear la carpeta `src/finance/services`.
    *   [x] Dentro, crear un nuevo archivo `src/finance/services/financeService.ts`.
    *   [x] Este servicio centralizará todas las llamadas a los endpoints de finanzas y utilizará la instancia de `apiClient` existente.

*   **[x] Tarea 1.3: Definición de Tipos y DTOs en TypeScript.**
    *   [x] Crear la carpeta `src/finance/dto`.
    *   [x] Dentro, crear un archivo `src/finance/dto/finance.ts`.
    *   [x] Este archivo contendrá todas las interfaces y tipos del módulo de finanzas.

#### **[x] Fase 2: Componentes Reutilizables de la Interfaz (UI)**

[x] En esta fase, construiremos los bloques visuales de forma aislada dentro de `src/finance/components`.

*   **[x] Tarea 2.1: Creación de la carpeta de componentes.**
    *   [x] Crear la carpeta `src/finance/components`.

*   **[x] Tarea 2.2: Componente `AccountList`.**
    *   [x] Crear el archivo `src/finance/components/AccountList.tsx`.
    *   [x] Será un componente que recibe un array de `FinancialAccount` y las muestra.

*   **[x] Tarea 2.3: Componente `AccountForm`.**
    *   [x] Crear el archivo `src/finance/components/AccountForm.tsx`.
    *   [x] Contendrá el formulario para crear/editar una cuenta.

*   **[x] Tarea 2.4: Componente `TransactionList` (antes `MovementList`).**
    *   [x] Crear el archivo `src/finance/components/TransactionList.tsx`.
    *   [x] Mostrará las transacciones de una cuenta.

#### **[] Fase 3: Integración en Páginas y Manejo de Estado**

[] Aquí uniremos la capa de datos con los componentes de UI. Las páginas seguirán en `src/app` como requiere Next.js.

*   **[] Nota sobre la estructura de páginas:** El App Router de Next.js requiere que las rutas y sus archivos (`page.tsx`, `layout.tsx`) residan en el directorio `src/app`. Por lo tanto, crearemos las páginas en `src/app/finance/...` e importaremos los componentes desde `src/finance/components`.

*   **[] Tarea 3.1: Creación de la Página del Dashboard de Finanzas.**
    *   [] Crear la ruta y página `src/app/finance/dashboard/page.tsx`.
    *   [] Esta página importará y usará el servicio desde `src/finance/services/financeService` y los componentes desde `src/finance/components`.

*   **[] Tarea 3.2: Creación de la Página de Detalle de Cuenta.**
    *   [] Crear la ruta dinámica `src/app/finance/accounts/[id]/page.tsx`.
    *   [] Importará y usará los componentes y servicios del módulo `src/finance`.

*   **[] Tarea 3.3: Protección de Rutas del Módulo.**
    *   [] Asegurar que las páginas bajo `src/app/finance` estén protegidas usando el `ProtectedRoute` existente.

#### **[] Fase 4: Implementación de Funcionalidades CRUD**

[] Con todo conectado, el último paso es hacer que la aplicación sea interactiva.

*   **[] Tarea 4.1: Funcionalidad de Crear Cuenta.**
    *   [] En el dashboard, usar el componente `AccountForm` (de `src/finance/components`) para crear cuentas llamando al `financeService`.

*   **[] Tarea 4.2: Funcionalidad de Eliminar Cuenta.**
    *   [] Implementar la lógica de eliminación en el `AccountList` llamando al `financeService`.

*   **[] Tarea 4.3: Funcionalidad de Añadir Movimiento.**
    *   [] En la página de detalle, usar un formulario para añadir movimientos llamando al `financeService`.
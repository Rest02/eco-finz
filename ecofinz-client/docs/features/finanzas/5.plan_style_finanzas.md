### **Contexto**

Este documento define el plan estratégico para la implementación del nuevo diseño visual "Dark Premium" en el módulo de finanzas de EcoFinz. El objetivo es transformar la experiencia de usuario actual mediante la adopción de una interfaz moderna, minimalista y sofisticada, basada en las especificaciones visuales detalladas en `docs/styles/Finanzas/1.page_design.md`. Esta transformación busca no solo mejorar la estética, sino también la usabilidad y la percepción de valor de la aplicación, alineando el frontend con los estándares de diseño actuales (Glassmorphism, modo oscuro profundo, tipografía limpia).

### **Buenas Prácticas para la IA**

*   **Integridad Arquitectónica:** Respetar estrictamente la estructura de directorios basada en `features` (`src/features/finance`). No crear componentes globales si pertenecen exclusivamente al dominio de finanzas.
*   **Escalabilidad CSS:** Utilizar exclusivamente **Tailwind CSS** para los estilos. Evitar estilos en línea (`style={{}}`) o archivos CSS separados a menos que sea estrictamente necesario para configuraciones globales. Priorizar la creación de componentes reutilizables (ej. `GlassCard`, `SidebarItem`) para mantener el código DRY (Don't Repeat Yourself).
*   **Principios SOLID:** Asegurar que los componentes visuales sean responsables solo de la presentación ("dumb components") y reciban datos vía props, manteniendo la lógica de negocio separada en hooks personalizados o servicios.
*   **Mobile-First:** Garantizar que, aunque el diseño de referencia es de escritorio, la implementación considere la adaptabilidad a dispositivos móviles (diseño responsivo).

### **Metodología de Trabajo**

1.  **Ejecución por Fases:** La IA implementará el plan fase por fase. No se avanzará a una nueva fase hasta que la actual haya sido completada y verificada.
2.  **Ciclo de Revisión:** Al finalizar las tareas de una fase, la IA notificará al usuario explícitamente ("Fase X completada. Por favor, revise los cambios..."). El usuario validará la implementación visual y funcional.
3.  **Responsabilidad de Comandos:** La IA **no ejecutará** comandos de instalación o construcción en la terminal. La IA proporcionará los comandos exactos (ej. `npm install lucide-react`) y esperará la confirmación del usuario de que han sido ejecutados antes de proceder con el código que depende de ellos.
4.  **Iteración:** Si el resultado visual no coincide con el diseño esperado, se iterará sobre la misma fase hasta lograr la fidelidad deseada antes de continuar.

---

# Plan de Implementación de Diseño: Módulo Finanzas

Este documento detalla el plan para implementar el nuevo diseño "Dark Premium" (basado en `docs/styles/Finanzas/1.page_design.md`) en el módulo de finanzas. El objetivo es transformar la interfaz actual en un dashboard moderno, utilizando Tailwind CSS y componentes modulares.

## Objetivo Visual
Implementar un diseño oscuro, minimalista y sofisticado con:
*   **Fondo:** `#030303` (Ultra Dark).
*   **Tipografía:** 'Plus Jakarta Sans'.
*   **Estilo:** Glassmorphism, gradientes sutiles y bordes translúcidos.
*   **Layout:** 3 columnas (Sidebar Nav, Contenido Principal, Sidebar Detalles).

---

## Fases de Implementación

### [x] Fase 1: Configuración Global y Dependencias

Preparar el entorno para soportar los nuevos estilos y activos.

*   **[x] Tarea 1.1: Instalación de Iconos.**
    *   Instalar `lucide-react` para reemplazar los iconos actuales y coincidir con el diseño.
    *   Comando: `npm install lucide-react` (El usuario lo ejecutará).

*   **[x] Tarea 1.2: Configuración de Tailwind.**
    *   Extender la configuración en `tailwind.config.ts`:
        *   Colores personalizados (ej. `bg-[#030303]`, `glass-white`).
        *   Animaciones (`growUp`, `fade-in`).
        *   Fuentes (añadir `Plus Jakarta Sans` vía `next/font`).

*   **[x] Tarea 1.3: Estilos Globales (CSS).**
    *   En `globals.css`:
        *   Implementar las clases utilitarias personalizadas del diseño (`.glass-card`, `.custom-scrollbar`).
        *   Definir los gradientes de fondo y efectos de hover.

---

### [x] Fase 2: Estructura del Layout (Finance Shell)

Crear el "esqueleto" que contendrá todas las páginas del módulo de finanzas.

*   **[x] Tarea 2.1: Componente `Sidebar` (Navegación Izquierda).**
    *   Crear `src/features/finance/components/layout/Sidebar.tsx`.
    *   Implementar la barra lateral estrecha con iconos (`Home`, `Wallet`, `Chart`, etc.) y el logo.
    *   Asegurar que sea responsiva (oculta en móvil o convertida en menú inferior).

*   **[x] Tarea 2.2: Componente `RightPanel` (Detalles Derecho).**
    *   Crear `src/features/finance/components/layout/RightPanel.tsx`.
    *   Este panel contendrá la tarjeta de crédito visual y actividades recientes.
    *   Debe ser plegable o apilarse en pantallas pequeñas.

*   **[x] Tarea 2.3: Layout Principal de Finanzas.**
    *   Crear o actualizar `src/app/finance/layout.tsx`.
    *   Integrar `Sidebar` y preparar el área de contenido principal (`children`) con el fondo oscuro correcto.
    *   *Nota:* El `RightPanel` puede ser parte del layout o específico del Dashboard, decidiremos integrarlo en el Dashboard para dar más espacio a otras páginas si es necesario, o mantenerlo fijo si el diseño lo requiere. (Por ahora, asumiremos que es parte de la página Dashboard para mayor flexibilidad).

---

### [] Fase 3: Componentes del Dashboard (Columna Central)

Implementar los widgets visuales del área principal.

*   **[] Tarea 3.1: `DashboardHeader`.**
    *   Crear componente para el Título, Barra de Búsqueda y Perfil.
    *   Ubicación: `src/features/finance/components/dashboard/DashboardHeader.tsx`.

*   **[] Tarea 3.2: `StatsGrid` (Tarjetas Superiores).**
    *   Crear componente `src/features/finance/components/dashboard/StatsGrid.tsx`.
    *   Implementar las 4 tarjetas "Glass" (`Transfer via Card`, `Same Bank`, etc.) con sus iconos y gradientes específicos.
    *   Hacerlas dinámicas para recibir props (título, monto, icono).

*   **[] Tarea 3.3: `BalanceChart` (Gráfico de Barras).**
    *   Crear `src/features/finance/components/dashboard/BalanceChart.tsx`.
    *   Adaptar la implementación CSS/HTML del diseño original a React.
    *   Asegurar que las barras acepten porcentajes dinámicos basados en datos reales.

*   **[] Tarea 3.4: `TransactionHistoryList`.**
    *   Crear versión estilizada de la lista de historial en `src/features/finance/components/dashboard/TransactionHistoryList.tsx`.
    *   Reemplazar la tabla antigua por el diseño de lista con avatares e iconos.

---

### [] Fase 4: Componentes del Panel Derecho (Widgets)

Implementar los widgets de la columna derecha.

*   **[] Tarea 4.1: `CreditCardWidget`.**
    *   Crear la tarjeta visual con gradientes y efecto de "ruido" (noise texture).
    *   Ubicación: `src/features/finance/components/dashboard/CreditCardWidget.tsx`.

*   **[] Tarea 4.2: `RecentActivityList`.**
    *   Lista compacta con iconos de servicios (Agua, Electricidad, etc.).

*   **[] Tarea 4.3: `UpcomingPayments`.**
    *   Lista de pagos pendientes.

---

### [] Fase 5: Integración de Datos (Conexión Frontend-Backend)

Conectar los nuevos componentes visuales con los hooks y servicios existentes.

*   **[] Tarea 5.1: Integrar `useMonthlySummary`.**
    *   Alimentar el `BalanceChart` con los datos del endpoint de resumen.

*   **[] Tarea 5.2: Integrar `useTransactions`.**
    *   Alimentar `TransactionHistoryList` y `RecentActivityList` con datos reales de la API.
    *   Mapear categorías del backend a los iconos de `lucide-react` (ej. "Comida" -> Icono de Utensilios).

*   **[] Tarea 5.3: Integrar `useAccounts`.**
    *   Mostrar el saldo real en las `StatsCards` o en la `CreditCardWidget`.

*   **[] Tarea 5.4: Limpieza Final.**
    *   Eliminar componentes de UI antiguos que hayan sido completamente reemplazados.
    *   Verificar consistencia visual en páginas secundarias (Cuentas, Categorías) aplicando el layout oscuro.
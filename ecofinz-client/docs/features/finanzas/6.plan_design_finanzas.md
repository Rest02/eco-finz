# Plan de Diseño e Implementación: Gestión de Cuentas

## 1. Contexto General
**Objetivo:** Crear una página dedicada para la gestión de cuentas financieras ("Billetera") accesible desde el sidebar (`/finance/accounts`).
**Propósito:** Permitir al usuario visualizar todas sus cuentas, crear nuevas cuentas, y realizar operaciones de actualización y eliminación de manera intuitiva.
**Situación Actual:** Existen los componentes `AccountList` y `AccountForm` y los hooks de servicio (`useAccounts`, `useCreateAccount`, etc.), pero no existe la página contenedora en `src/app/finance/accounts/page.tsx`.
**Audiencia:** Desarrolladores y Asistentes de IA encargados de la implementación.

## 2. Reglas y Buenas Prácticas
*   **Tech Stack:** Next.js 14+ (App Router), React, TypeScript, Tailwind CSS.
*   **Gestión de Estado:** Utilizar React Query (TanStack Query) a través de los hooks existentes en `src/features/finance/hooks`.
*   **Estilos:** Mantener la estética "Glassmorphism" y modo oscuro del proyecto (`bg-dark-bg`, `glass-card`, bordes translúcidos).
*   **Componentes:** Reutilizar `AccountForm` y `AccountList`. Evitar lógica de negocio compleja dentro de la página (`page.tsx`); delegar en hooks o componentes contenedores si crece demasiado.
*   **Tipado:** Uso estricto de interfaces definidas en `src/features/finance/types/finance.ts`.
*   **Feedback al Usuario:** Mostrar estados de carga (`isLoading`) y mensajes de error/éxito claros.

## 3. Instrucciones de Uso
1.  Este plan se ejecutará por **Fases**.
2.  El usuario solicitará iniciar una fase.
3.  La IA implementará los cambios correspondientes a esa fase.
4.  Al finalizar la implementación de la fase, la IA solicitará al usuario que verifique los cambios.
5.  Si la verificación es exitosa, se procederá a la siguiente fase.
6.  **Nota:** La IA proporcionará los comandos de consola necesarios; el usuario solo debe copiarlos y ejecutarlos.

---

## [x] Fase 1: Estructura Inicial y Navegación
**Objetivo:** Crear el archivo de página y verificar que la navegación desde el Sidebar funcione.

*   [x] **Tarea 1.1:** Crear el archivo `src/app/finance/accounts/page.tsx`.
*   [x] **Tarea 1.2:** Implementar una estructura básica (scaffold) con un título y un contenedor principal.
*   [x] **Tarea 1.3:** Verificar que la ruta `/finance/accounts` cargue correctamente al hacer clic en el ícono de "Billetera" del Sidebar.

## [x] Fase 2: Integración de Lógica y Componentes
**Objetivo:** Conectar los componentes existentes (`AccountList`, `AccountForm`) con los datos reales usando los hooks personalizados.

*   [x] **Tarea 2.1:** Importar y utilizar el hook `useAccounts` en `src/app/finance/accounts/page.tsx` para obtener la lista de cuentas.
*   [x] **Tarea 2.2:** Integrar el componente `AccountList` para mostrar las cuentas obtenidas.
*   [x] **Tarea 2.3:** Integrar el componente `AccountForm` para permitir la creación de nuevas cuentas.
*   [x] **Tarea 2.4:** Implementar el estado local para manejar el modo "Edición" (cuando se selecciona una cuenta para editar desde la lista).
    *   Al hacer clic en "Editar" en `AccountList`, el `AccountForm` debe poblarse con los datos de la cuenta.
    *   Añadir botón/lógica para "Cancelar Edición".
*   [x] **Tarea 2.5:** Conectar la función de eliminación (`onAccountDeleted`) del `AccountList` con la mutación de eliminación (crear hook `useDeleteAccount` si no existe o importarlo).

## [ ] Fase 3: Diseño Visual y Experiencia de Usuario (UX)
**Objetivo:** Pulir la interfaz para que coincida con el diseño premium de la aplicación (Dashboard).

*   [ ] **Tarea 3.1:** Aplicar estilos de contenedor (Grid o Flex) para organizar el Formulario y la Lista.
    *   *Sugerencia:* En pantallas grandes, mostrar lista a la izquierda y formulario a la derecha (sticky), o usar un modal para el formulario.
*   [ ] **Tarea 3.2:** Mejorar el diseño de `AccountList` para usar tarjetas con estilo "glass" en lugar de una lista plana, mostrando iconos según el tipo de cuenta.
*   [ ] **Tarea 3.3:** Mejorar el `AccountForm` para que se integre visualmente (inputs estilizados, botones con gradientes/bordes sutiles).
*   [ ] **Tarea 3.4:** Añadir feedback visual (Toast o alertas) al completar acciones (Crear, Editar, Eliminar).

## [ ] Fase 4: Verificación y Limpieza
**Objetivo:** Asegurar que todo funcione sin errores y limpiar código temporal.

*   [ ] **Tarea 4.1:** Realizar pruebas manuales de flujo completo: Crear -> Ver en lista -> Editar -> Ver cambio -> Eliminar.
*   [ ] **Tarea 4.2:** Verificar consola del navegador por errores o advertencias de React.
*   [ ] **Tarea 4.3:** Actualizar documentación de estado de tareas si es necesario.